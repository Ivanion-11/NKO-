
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞ | AtomHeart Heroes</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="bg-gray-900">
    <!-- –ö—Ä–∞—Å–∏–≤—ã–π —Ñ–æ–Ω -->
    <div class="background-wrapper"></div>
    <div class="particles-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <custom-navbar></custom-navbar>
    
    <main class="main-content container mx-auto px-4 py-8">
        <div class="max-w-6xl mx-auto">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="text-center mb-12 fade-in-up">
                <h1 class="text-5xl md:text-6xl font-black mb-6 gradient-text leading-tight">
                    –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
                </h1>
                <p class="text-xl text-gray-300 max-w-2xl mx-auto font-medium">
                    –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–∏–º–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
                </p>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞ -->
            <div class="card p-8 mb-8 fade-in-up">
                <div class="flex flex-col md:flex-row items-start md:items-center justify-between">
                    <div class="flex items-center mb-6 md:mb-0">
                        <div class="w-20 h-20 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold mr-6 shadow-lg" id="volunteerAvatar">
                            –ò
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800" id="volunteerName">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</h2>
                            <p class="text-gray-600" id="volunteerInfo">–í–æ–ª–æ–Ω—Ç—ë—Ä ‚Ä¢ –ù–æ–≤–æ—É—Ä–∞–ª—å—Å–∫, –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</p>
                            <div class="flex flex-wrap gap-2 mt-2">
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium">üå± –ê–∫—Ç–∏–≤–Ω—ã–π –≤–æ–ª–æ–Ω—Ç—ë—Ä</span>
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium">‚≠ê 15 –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</span>
                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium">üèÜ –õ–∏–¥–µ—Ä –º–µ—Å—è—Ü–∞</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="logoutVolunteer()" class="btn btn-border btn-sm">
                        <i data-feather="log-out" class="w-4 h-4"></i>
                        –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>

            <div class="grid lg:grid-cols-4 gap-8">
                <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
                <div class="lg:col-span-1">
                    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                    <div class="card p-6 mb-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                        <a href="#my-events" class="btn btn-primary btn-wave btn-icon w-full mb-3">
                            <i data-feather="calendar" class="w-5 h-5"></i>
                            –ú–æ–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                        </a>
                        <a href="index.html#map-section" class="btn btn-glass btn-icon w-full mb-3">
                            <i data-feather="search" class="w-5 h-5"></i>
                            –ù–∞–π—Ç–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                        </a>
                        <button onclick="editProfile()" class="btn btn-border btn-icon w-full">
                            <i data-feather="edit" class="w-5 h-5"></i>
                            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                        </button>
                    </div>

                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div id="volunteerStats" class="space-y-4">
                            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>

                    <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
                    <div class="card p-6 mt-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                        <div id="achievementsList" class="space-y-3">
                            <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>

                <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
                <div class="lg:col-span-3">
                    <!-- –ú–æ–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è -->
                    <div id="my-events" class="mb-12">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-white">–ú–æ–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h2>
                            <a href="index.html#map-section" class="btn btn-primary btn-wave btn-icon">
                                <i data-feather="plus" class="w-5 h-5"></i>
                                –ù–∞–π—Ç–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                            </a>
                        </div>

                        <div id="volunteerEventsContainer" class="space-y-6">
                            <!-- –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                        </div>

                        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π -->
                        <div id="emptyEventsState" class="card p-12 text-center hidden">
                            <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-gray-300 to-gray-400 rounded-2xl flex items-center justify-center text-white text-2xl">
                                <i data-feather="calendar" class="w-10 h-10"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">–í—ã –ø–æ–∫–∞ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö</h3>
                            <p class="text-gray-600 mb-6">–ù–∞–π–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</p>
                            <a href="index.html#map-section" class="btn btn-primary btn-wave btn-icon">
                                <i data-feather="search" class="w-5 h-5"></i>
                                –ù–∞–π—Ç–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                            </a>
                        </div>
                    </div>

                    <!-- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è -->
                    <div class="card p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i data-feather="star" class="w-6 h-6 mr-3 text-yellow-500"></i>
                            –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ
                        </h2>
                        <div id="recommendedEvents" class="space-y-4">
                            <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
    <div id="profileModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</h3>
                <button onclick="closeProfileModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-feather="x" class="w-6 h-6"></i>
                </button>
            </div>

            <form id="profileForm" class="space-y-6">
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label for="editFullName" class="block text-sm font-semibold text-gray-700 mb-3">–§–ò–û *</label>
                        <input type="text" id="editFullName" name="editFullName" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                    </div>
                    
                    <div>
                        <label for="editEmail" class="block text-sm font-semibold text-gray-700 mb-3">Email *</label>
                        <input type="email" id="editEmail" name="editEmail" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label for="editPhone" class="block text-sm font-semibold text-gray-700 mb-3">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" id="editPhone" name="editPhone"
                               class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                    </div>
                    
                    <div>
                        <label for="editCity" class="block text-sm font-semibold text-gray-700 mb-3">–ì–æ—Ä–æ–¥ *</label>
                        <select id="editCity" name="editCity" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                            <option value="–ù–æ–≤–æ—É—Ä–∞–ª—å—Å–∫, –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ù–æ–≤–æ—É—Ä–∞–ª—å—Å–∫, –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                            <option value="–î—É–±–Ω–∞, –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–î—É–±–Ω–∞, –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                            <option value="–°–æ—Å–Ω–æ–≤—ã–π –ë–æ—Ä, –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–°–æ—Å–Ω–æ–≤—ã–π –ë–æ—Ä, –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                            <option value="–û–∑—ë—Ä—Å–∫, –ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–û–∑—ë—Ä—Å–∫, –ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label for="editAbout" class="block text-sm font-semibold text-gray-700 mb-3">–û —Å–µ–±–µ</label>
                    <textarea id="editAbout" name="editAbout" rows="4"
                              class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300"
                              placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..."></textarea>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ -->
                <div class="flex gap-4 pt-4">
                    <button type="button" onclick="closeProfileModal()" class="btn btn-border flex-1">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="submit" class="btn btn-primary btn-wave btn-icon flex-1">
                        <i data-feather="save" class="w-5 h-5"></i>
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <custom-footer></custom-footer>
    
    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>
    <script src="script.js"></script>
    <script src="components/volunteer-events.js"></script>
    <script>
        feather.replace();
        
        // –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤
        const volunteerAuthSystem = {
            currentVolunteerKey: 'currentVolunteer',
            volunteersKey: 'volunteersData',

            // –í—Ö–æ–¥ –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
            loginVolunteer(email, password) {
                const volunteers = JSON.parse(localStorage.getItem(this.volunteersKey) || '[]');
                const volunteer = volunteers.find(v => v.email === email && v.password === password);
                
                if (volunteer) {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞ (–±–µ–∑ –ø–∞—Ä–æ–ª—è)
                    const { password, ...volunteerData } = volunteer;
                    localStorage.setItem(this.currentVolunteerKey, JSON.stringify(volunteerData));
                    return true;
                }
                return false;
            },

            // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
            registerVolunteer(volunteerData) {
                const volunteers = JSON.parse(localStorage.getItem(this.volunteersKey) || '[]');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞ —Å —Ç–∞–∫–∏–º email
                if (volunteers.find(v => v.email === volunteerData.email)) {
                    return { success: false, message: '–í–æ–ª–æ–Ω—Ç—ë—Ä —Å —Ç–∞–∫–∏–º email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω' };
                }

                // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
                volunteers.push(volunteerData);
                localStorage.setItem(this.volunteersKey, JSON.stringify(volunteers));

                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ö–æ–¥–∏–º
                const { password, ...volunteerDataWithoutPassword } = volunteerData;
                localStorage.setItem(this.currentVolunteerKey, JSON.stringify(volunteerDataWithoutPassword));

                return { success: true, message: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞' };
            },

            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
            getCurrentVolunteer() {
                return JSON.parse(localStorage.getItem(this.currentVolunteerKey) || 'null');
            },

            // –í—ã—Ö–æ–¥
            logout() {
                localStorage.removeItem(this.currentVolunteerKey);
                window.location.href = 'index.html';
            },

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
            updateProfile(updatedData) {
                const currentVolunteer = this.getCurrentVolunteer();
                if (!currentVolunteer) return false;

                const volunteers = JSON.parse(localStorage.getItem(this.volunteersKey) || '[]');
                const volunteerIndex = volunteers.findIndex(v => v.email === currentVolunteer.email);

                if (volunteerIndex !== -1) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
                    volunteers[volunteerIndex] = { ...volunteers[volunteerIndex], ...updatedData };
                    localStorage.setItem(this.volunteersKey, JSON.stringify(volunteers));

                    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
                    const { password, ...volunteerData } = volunteers[volunteerIndex];
                    localStorage.setItem(this.currentVolunteerKey, JSON.stringify(volunteerData));

                    return true;
                }
                return false;
            }
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            loadVolunteerData();
            loadVolunteerEvents();
            updateVolunteerStats();
            loadRecommendedEvents();
            loadAchievements();
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
        function loadVolunteerData() {
            const volunteer = volunteerAuthSystem.getCurrentVolunteer();
            
            if (!volunteer) {
                // –ï—Å–ª–∏ –≤–æ–ª–æ–Ω—Ç—ë—Ä –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
                window.location.href = 'volunteer-login.html';
                return;
            }

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            document.getElementById('volunteerName').textContent = volunteer.fullName;
            document.getElementById('volunteerInfo').textContent = `–í–æ–ª–æ–Ω—Ç—ë—Ä ‚Ä¢ ${volunteer.city}`;
            document.getElementById('volunteerAvatar').textContent = volunteer.fullName.charAt(0);

            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            document.getElementById('editFullName').value = volunteer.fullName;
            document.getElementById('editEmail').value = volunteer.email;
            document.getElementById('editPhone').value = volunteer.phone || '';
            document.getElementById('editCity').value = volunteer.city;
            document.getElementById('editAbout').value = volunteer.about || '';
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
        function loadVolunteerEvents() {
            const volunteer = volunteerAuthSystem.getCurrentVolunteer();
            if (!volunteer) return;

            const volunteerEvents = volunteerEventsSystem.getVolunteerEvents(volunteer.email);
            const container = document.getElementById('volunteerEventsContainer');
            const emptyState = document.getElementById('emptyEventsState');

            if (volunteerEvents.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            
            container.innerHTML = volunteerEvents.map(event => `
                <div class="card group hover:scale-105 transition-all duration-300">
                    <div class="relative overflow-hidden rounded-t-2xl">
                        <img src="${event.image}" alt="${event.title}" class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute top-4 left-4 ${getCategoryColorClass(event.category)} text-white px-3 py-1 rounded-full text-sm font-semibold">
                            ${event.category}
                        </div>
                        <div class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm text-gray-800 px-3 py-1 rounded-full text-sm font-semibold">
                            ${formatDate(event.date)}
                        </div>
                        <div class="absolute bottom-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                            ${event.participants} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-3 group-hover:text-blue-600 transition-colors">
                            ${event.title}
                        </h3>
                        <div class="flex items-center text-gray-600 mb-3">
                            <i data-feather="map-pin" class="w-4 h-4 mr-2"></i>
                            <span class="text-sm">${event.address}, ${event.city}</span>
                        </div>
                        <p class="text-gray-600 text-sm mb-4 leading-relaxed">
                            ${event.description}
                        </p>
                        <div class="flex items-center justify-between">
                            <span class="text-blue-600 font-semibold">${event.organization}</span>
                            <button onclick="unregisterFromEvent(${event.id})" class="btn btn-border btn-sm">
                                –û—Ç–º–µ–Ω–∏—Ç—å —É—á–∞—Å—Ç–∏–µ
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            feather.replace();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateVolunteerStats() {
            const volunteer = volunteerAuthSystem.getCurrentVolunteer();
            if (!volunteer) return;

            const stats = volunteerEventsSystem.getVolunteerStats(volunteer.email);
            
            document.getElementById('volunteerStats').innerHTML = `
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">–í—Å–µ–≥–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</span>
                    <span class="font-bold text-blue-600">${stats.totalEvents}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö</span>
                    <span class="font-bold text-green-600">${stats.upcomingEvents}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö</span>
                    <span class="font-bold text-purple-600">${stats.completedEvents}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">–õ—é–±–∏–º–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                    <span class="font-bold text-orange-600">${stats.favoriteCategory}</span>
                </div>
            `;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
        function loadRecommendedEvents() {
            const volunteer = volunteerAuthSystem.getCurrentVolunteer();
            if (!volunteer) return;

            const publicEvents = volunteerEventsSystem.getPublicEvents({ city: volunteer.city });
            const volunteerEvents = volunteerEventsSystem.getVolunteerEvents(volunteer.email);
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–ª–æ–Ω—Ç—ë—Ä –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
            const recommendedEvents = publicEvents.filter(event => 
                !volunteerEvents.some(ve => ve.id === event.id) && 
                new Date(event.date) >= new Date()
            ).slice(0, 3);

            const container = document.getElementById('recommendedEvents');
            
            if (recommendedEvents.length === 0) {
                container.innerHTML = '<p class="text-gray-600 text-center">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</p>';
                return;
            }

            container.innerHTML = recommendedEvents.map(event => `
                <a href="event-single.html?id=${event.id}" class="block card p-6 hover:scale-105 transition-transform duration-300 group">
                    <div class="flex items-center">
                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl p-4 text-center w-20 mr-6 shadow-lg">
                            <div class="text-lg font-bold">${new Date(event.date).getDate()}</div>
                            <div class="text-xs uppercase">${new Date(event.date).toLocaleString('ru', { month: 'short' })}</div>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg text-gray-800 mb-1 group-hover:text-blue-600 transition-colors">${event.title}</h3>
                            <div class="text-gray-600 flex items-center">
                                <i data-feather="map-pin" class="w-4 h-4 mr-2"></i>
                                ${event.address}
                            </div>
                        </div>
                        <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                            –ù–æ–≤–æ–µ
                        </div>
                    </div>
                </a>
            `).join('');

            feather.replace();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        function loadAchievements() {
            const volunteer = volunteerAuthSystem.getCurrentVolunteer();
            if (!volunteer) return;

            const achievements = [
                { name: '–ü–µ—Ä–≤—ã–π —à–∞–≥', description: '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ', earned: true },
                { name: '–ê–∫—Ç–∏–≤–Ω—ã–π –≤–æ–ª–æ–Ω—Ç—ë—Ä', description: '–£—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ 5 –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö', earned: true },
                { name: '–õ–∏–¥–µ—Ä —Å–æ–æ–±—â–µ—Å—Ç–≤–∞', description: '–£—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ 15 –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö', earned: false },
                { name: '–≠–∫–æ-–≥–µ—Ä–æ–π', description: '–£—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ 3 —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∞–∫—Ü–∏—è—Ö', earned: true }
            ];

            document.getElementById('achievementsList').innerHTML = achievements.map(achievement => `
                <div class="flex items-center p-3 rounded-xl ${achievement.earned ? 'bg-green-50 border border-green-200' : 'bg-gray-100 border border-gray-200'}">
                    <div class="w-8 h-8 rounded-full ${achievement.earned ? 'bg-green-500' : 'bg-gray-400'} flex items-center justify-center text-white mr-3">
                        <i data-feather="${achievement.earned ? 'award' : 'lock'}" class="w-4 h-4"></i>
                    </div>
                    <div>
                        <div class="font-medium text-sm ${achievement.earned ? 'text-green-800' : 'text-gray-600'}">${achievement.name}</div>
                        <div class="text-xs ${achievement.earned ? 'text-green-600' : 'text-gray-500'}">${achievement.description}</div>
                    </div>
                </div>
            `).join('');

            feather.replace();
        }

        // –§—É–Ω–∫—Ü–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function editProfile() {
            document.getElementById('profileModal').classList.remove('hidden');
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.add('hidden');
        }

        // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        function logoutVolunteer() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                volunteerAuthSystem.logout();
            }
        }

        // –û—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
        function unregisterFromEvent(eventId) {
            const volunteer = volunteerAuthSystem.getCurrentVolunteer();
            if (!volunteer) return;

            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ —ç—Ç–æ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏?')) {
                const result = volunteerEventsSystem.unregisterVolunteer(eventId, volunteer.email);
                alert(result.message);
                if (result.success) {
                    loadVolunteerEvents();
                    updateVolunteerStats();
                    loadRecommendedEvents();
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                fullName: document.getElementById('editFullName').value,
                email: document.getElementById('editEmail').value,
                phone: document.getElementById('editPhone').value,
                city: document.getElementById('editCity').value,
                about: document.getElementById('editAbout').value
            };

            const success = volunteerAuthSystem.updateProfile(formData);
            
            if (success) {
                alert('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!');
                closeProfileModal();
                loadVolunteerData();
                loadVolunteerEvents();
                updateVolunteerStats();
            } else {
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è');
            }
        });

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getCategoryColorClass(category) {
            const colors = {
                '–≠–∫–æ–ª–æ–≥–∏—è': 'bg-green-500',
                '–°–ø–æ—Ä—Ç': 'bg-red-500',
                '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ': 'bg-blue-500',
                '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å': 'bg-purple-500',
                '–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ': 'bg-orange-500',
                '–ö—É–ª—å—Ç—É—Ä–∞': 'bg-pink-500'
            };
            return colors[category] || 'bg-blue-500';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long' });
        }
    </script>
</body>
</html>
